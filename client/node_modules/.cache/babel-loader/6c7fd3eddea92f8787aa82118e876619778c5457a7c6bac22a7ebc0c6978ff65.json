{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import io from'socket.io-client';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io();const Chat=()=>{const{id}=useParams();const[messages,setMessages]=useState([]);const[msg,setMsg]=useState('');const[typing,setTyping]=useState(false);useEffect(()=>{socket.emit('join',{friendId:id});socket.on('message',data=>{setMessages(prev=>[...prev,data]);});socket.on('typing',status=>{setTyping(status);});return()=>socket.disconnect();},[id]);const sendMsg=()=>{socket.emit('message',{to:id,msg});setMessages(prev=>[...prev,{self:true,msg}]);setMsg('');};const handleTyping=()=>{socket.emit('typing',{to:id});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-box\",children:[messages.map((m,i)=>/*#__PURE__*/_jsx(\"p\",{className:m.self?'self':'friend',children:m.msg},i)),typing&&/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"em\",{children:\"Typing...\"})})]}),/*#__PURE__*/_jsx(\"input\",{value:msg,onChange:e=>setMsg(e.target.value),onKeyDown:handleTyping,placeholder:\"Type a message...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMsg,children:\"Send\"})]});};export default Chat;","map":{"version":3,"names":["React","useEffect","useState","useParams","io","jsx","_jsx","jsxs","_jsxs","socket","Chat","id","messages","setMessages","msg","setMsg","typing","setTyping","emit","friendId","on","data","prev","status","disconnect","sendMsg","to","self","handleTyping","children","className","map","m","i","value","onChange","e","target","onKeyDown","placeholder","onClick"],"sources":["B:/miki-chat-app/client/src/components/Chat.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport io from 'socket.io-client';\r\n\r\nconst socket = io();\r\n\r\nconst Chat = () => {\r\n  const { id } = useParams();\r\n  const [messages, setMessages] = useState([]);\r\n  const [msg, setMsg] = useState('');\r\n  const [typing, setTyping] = useState(false);\r\n\r\n  useEffect(() => {\r\n    socket.emit('join', { friendId: id });\r\n\r\n    socket.on('message', (data) => {\r\n      setMessages(prev => [...prev, data]);\r\n    });\r\n\r\n    socket.on('typing', (status) => {\r\n      setTyping(status);\r\n    });\r\n\r\n    return () => socket.disconnect();\r\n  }, [id]);\r\n\r\n  const sendMsg = () => {\r\n    socket.emit('message', { to: id, msg });\r\n    setMessages(prev => [...prev, { self: true, msg }]);\r\n    setMsg('');\r\n  };\r\n\r\n  const handleTyping = () => {\r\n    socket.emit('typing', { to: id });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"chat-box\">\r\n        {messages.map((m, i) => (\r\n          <p key={i} className={m.self ? 'self' : 'friend'}>{m.msg}</p>\r\n        ))}\r\n        {typing && <p><em>Typing...</em></p>}\r\n      </div>\r\n      <input\r\n        value={msg}\r\n        onChange={(e) => setMsg(e.target.value)}\r\n        onKeyDown={handleTyping}\r\n        placeholder=\"Type a message...\"\r\n      />\r\n      <button onClick={sendMsg}>Send</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,EAAE,KAAM,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,KAAM,CAAAC,MAAM,CAAGL,EAAE,CAAC,CAAC,CAEnB,KAAM,CAAAM,IAAI,CAAGA,CAAA,GAAM,CACjB,KAAM,CAAEC,EAAG,CAAC,CAAGR,SAAS,CAAC,CAAC,CAC1B,KAAM,CAACS,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,GAAG,CAAEC,MAAM,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAClC,KAAM,CAACc,MAAM,CAAEC,SAAS,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAE3CD,SAAS,CAAC,IAAM,CACdQ,MAAM,CAACS,IAAI,CAAC,MAAM,CAAE,CAAEC,QAAQ,CAAER,EAAG,CAAC,CAAC,CAErCF,MAAM,CAACW,EAAE,CAAC,SAAS,CAAGC,IAAI,EAAK,CAC7BR,WAAW,CAACS,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAED,IAAI,CAAC,CAAC,CACtC,CAAC,CAAC,CAEFZ,MAAM,CAACW,EAAE,CAAC,QAAQ,CAAGG,MAAM,EAAK,CAC9BN,SAAS,CAACM,MAAM,CAAC,CACnB,CAAC,CAAC,CAEF,MAAO,IAAMd,MAAM,CAACe,UAAU,CAAC,CAAC,CAClC,CAAC,CAAE,CAACb,EAAE,CAAC,CAAC,CAER,KAAM,CAAAc,OAAO,CAAGA,CAAA,GAAM,CACpBhB,MAAM,CAACS,IAAI,CAAC,SAAS,CAAE,CAAEQ,EAAE,CAAEf,EAAE,CAAEG,GAAI,CAAC,CAAC,CACvCD,WAAW,CAACS,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAAEK,IAAI,CAAE,IAAI,CAAEb,GAAI,CAAC,CAAC,CAAC,CACnDC,MAAM,CAAC,EAAE,CAAC,CACZ,CAAC,CAED,KAAM,CAAAa,YAAY,CAAGA,CAAA,GAAM,CACzBnB,MAAM,CAACS,IAAI,CAAC,QAAQ,CAAE,CAAEQ,EAAE,CAAEf,EAAG,CAAC,CAAC,CACnC,CAAC,CAED,mBACEH,KAAA,QAAAqB,QAAA,eACErB,KAAA,QAAKsB,SAAS,CAAC,UAAU,CAAAD,QAAA,EACtBjB,QAAQ,CAACmB,GAAG,CAAC,CAACC,CAAC,CAAEC,CAAC,gBACjB3B,IAAA,MAAWwB,SAAS,CAAEE,CAAC,CAACL,IAAI,CAAG,MAAM,CAAG,QAAS,CAAAE,QAAA,CAAEG,CAAC,CAAClB,GAAG,EAAhDmB,CAAoD,CAC7D,CAAC,CACDjB,MAAM,eAAIV,IAAA,MAAAuB,QAAA,cAAGvB,IAAA,OAAAuB,QAAA,CAAI,WAAS,CAAI,CAAC,CAAG,CAAC,EACjC,CAAC,cACNvB,IAAA,UACE4B,KAAK,CAAEpB,GAAI,CACXqB,QAAQ,CAAGC,CAAC,EAAKrB,MAAM,CAACqB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACxCI,SAAS,CAAEV,YAAa,CACxBW,WAAW,CAAC,mBAAmB,CAChC,CAAC,cACFjC,IAAA,WAAQkC,OAAO,CAAEf,OAAQ,CAAAI,QAAA,CAAC,MAAI,CAAQ,CAAC,EACpC,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnB,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}